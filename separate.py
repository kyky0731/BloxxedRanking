import discord
import roblox

intents = discord.Intents.all()
client = discord.Client(intents=intents)
roblox_token = "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_D962C1BDE619F20443E9B0D947C9B97B2DBE2F3E72544079C3F1F2C0452F8ACDFE80F52F36BA281727EC2834E945722C178AA6B780683E2E9CD234E75C5EB799E976E430DC426118F9309AE1C346D2F3CA063B4B8A04D151739EF48A723B95C35C302E01708A2BA7C5089576338942E882FF1682400D2C3DA252B67A60A9806C5081D0DD2F8F205572996497DE8E8A89C3E5E7C17D91FC35209FB3802666E9DC5140AE503DD95CC5F8A2EA4BF48ADA25E06CFAB7AF18225AEE5B6DDF2E05A26779C6340C31E3E88321EEE3522B1583C29E23265B13EC093B2D1A5D1B19BA583746622AE451185FDE2A541815FD8F1995760FA59AA2697D239893C6B3BFA0BF55E91DD73C7D954E671EFC8AC0E1D474516C80E61F7557C88FD5B870CF735DF39502A45311FC28DE6A005813E8C4FBDFF209AC76E2440DB38182DF7F927ADCFA7FEE2541345EB4BBAE4663A9FA905A814C3610538AE1A672E6DC6FF527DCF507C9FFDEC324C351CF00105462A39DCB71900B1171C72585A4F0D05EBE8F49F35FAA84D4F705E58F55DF0920E78B0F114E5B51756DC788B91C14A4DE47E966AA92AE193719AC6C3ACFFDBEC5DC6D22BCFA3EF08A23FE0875BBE9567609BF9E304B1979DBAC2F641EA6668365013C5585863290201B1BE8CA9D482A7AF05EB4D343909AE60A0642FC0A6F0B667349D4679E2546638465807DD1FA5AC9D5D6FD3D7D5C802E00D6D8FD918045998A1E0E86632B21E5385783F12AF4E3C473E8B3F8139D1D776269D23EBF02A426C634544323DC0D216502EDB6C1930AB42C5AB86F39AD118B91BBD6BEDFE03110D0D5B68146603157086DB09BE14219B5585FCE5160D30C0CAD55AF53CA340BEFC30FFBA0F4CADDDC75C3C27249AAB513A64BB3EA2F88300AA0B78FD73F1379864BAF0004ED8389D6D0CAC8F3BCE4B29B727E67AED7D58219A346F85358DFFAF1317FFB3E36FB1E804BE12434A801B55DB916DCDB5CE6E7C57E88FBDFC13B1C7BBE6E3B01A7665E290A5922151985ACF0AB99440477D9226BF16350185B3A5ED04D45061AB597E5E5F96274486937215BE36216AF719599F7DFF1698F569B158D8BC1665B80873D7127AB"
rob_client = roblox.Client(roblox_token)

async def promote_one(username, new_rank):
    print(new_rank)
    group = rob_client.get_base_group(3173379)
    user = await group.get_member_by_username(username)
    for role in await user.get_group_roles():
        if role.group.id == 3173379:
            give = role.rank
            break
    try:
        if give >= 3 and give < 11:
            if new_rank.lower() == "housekeeping":
                await group.set_rank(user, 7)
            elif new_rank.lower() == "cook":
                await group.set_rank(user, 8)
            elif new_rank.lower() == "receptionist":
                await group.set_rank(user, 10)
            elif new_rank.lower() == "security officer":
                await group.set_rank(user, 9)
        if give > 3 and give < 11:
            if new_rank.lower() == "shift leader":
                await group.set_rank(user, 11)
    except:
        pass
    
        
        


@client.event
async def on_ready():
    print("Ready")

@client.event
async def on_message(message):
    if message.author == client.user:
        return
    if message.channel.id == 1265830048179552307:
        print("im triggered")
        embeds = message.embeds
        embed = embeds[0]
        await promote_one(str(embed.fields[1].value), str(embed.fields[2].value))
client.run("MTI2NTgyNzU1ODkyNzExMDE0NQ.G7FVza.ShyaRvY9_vNYfDwHmW0fnWisXbGb2zvctdlZSI")
